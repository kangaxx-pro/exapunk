; UC Berkeley

GRAB 300
REPL SEARCH
COPY F M
COPY F M
DROP
MAKE
MARK RECV
COPY M X
TEST X = 0
TJMP DONE
COPY X F
JUMP RECV
MARK DONE
HALT

MARK SEARCH
COPY M X
LINK 800
MARK LOOP
LINK 800
LINK 800
HOST T
TEST X = T
FJMP LOOP
GRAB 200
COPY M X
SEEK 9999
SEEK -3
JUMP FIRSTSCAN
MARK SCANBACK
SEEK -4
MARK FIRSTSCAN
TEST F = X
FJMP SCANBACK
COPY F T
COPY F X

SEEK -9999
SEEK T
MARK COPYIT
COPY F M
SUBI X 1 X
TEST X > 0
TJMP COPYIT
COPY 0 M